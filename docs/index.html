<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Hybrid SRE Platform – Demo interactiva</title>
  <link rel="stylesheet" href="css/style.css" />
  <script defer src="js/app-sim.js"></script>
</head>
<body>
  <header class="app-header">
    <div class="logo">
      <span class="logo-mark">H</span>
      <div class="logo-text">
        <span class="logo-title">Hybrid SRE Platform</span>
        <span class="logo-subtitle">Demo UI · Autor: Jose Cazorla</span>
      </div>
    </div>
    <div class="header-right">
      <span class="user-pill">SRE · admin@hybrid</span>
    </div>
  </header>

  <div class="app-shell">
    <aside class="sidebar">
      <nav>
        <button class="nav-item active" data-view="dashboard">Dashboard</button>
        <button class="nav-item" data-view="environments">Entornos</button>
        <button class="nav-item" data-view="cloud-accounts">Cuentas cloud</button>
        <button class="nav-item" data-view="deployments">Despliegues</button>
        <button class="nav-item" data-view="settings">Ajustes demo</button>
      </nav>
    </aside>

    <main class="content">
      <!-- Dashboard -->
      <section id="view-dashboard" class="view active">
        <div class="card card-header">
          <div>
            <h2>Dashboard híbrido</h2>
            <p>Vista general de los entornos gestionados por la plataforma.</p>
          </div>
          <div class="toolbar">
            <label class="toolbar-field">
              Entorno:
              <select id="dashboard-env-select"></select>
            </label>
            <label class="toolbar-field">
              Proveedor:
              <select id="dashboard-provider-select">
                <option value="all">Todos</option>
                <option value="AWS">AWS</option>
                <option value="Azure">Azure</option>
                <option value="GCP">GCP</option>
                <option value="Local">On‑prem / Local</option>
              </select>
            </label>
          </div>
        </div>

        <div class="grid-3">
          <div class="mini-card" id="card-env-count">
            <div class="mini-label">Entornos</div>
            <div class="mini-value">–</div>
            <div class="mini-desc">Filtrados según el proveedor seleccionado</div>
          </div>
          <div class="mini-card" id="card-cloud-count">
            <div class="mini-label">Cuentas cloud</div>
            <div class="mini-value">–</div>
            <div class="mini-desc">AWS · Azure · GCP · Local</div>
          </div>
          <div class="mini-card" id="card-last-deploy">
            <div class="mini-label">Último despliegue</div>
            <div class="mini-value">–</div>
            <div class="mini-desc">Estado y entorno</div>
          </div>
        </div>

        <div class="card">
          <h3>Estado por entorno</h3>
          <table id="dashboard-env-table">
            <thead>
              <tr>
                <th>Entorno</th><th>Proveedor</th><th>Cluster</th><th>Estado</th><th>Último despliegue</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>

      <!-- Entornos -->
      <section id="view-environments" class="view">
        <div class="card card-header">
          <div>
            <h2>Entornos</h2>
            <p>Gestión simulada de entornos híbridos / multi‑cloud.</p>
          </div>
          <div class="toolbar">
            <label class="toolbar-field">
              Proveedor:
              <select id="env-filter-provider">
                <option value="all">Todos</option>
                <option value="AWS">AWS</option>
                <option value="Azure">Azure</option>
                <option value="GCP">GCP</option>
                <option value="Local">On‑prem / Local</option>
              </select>
            </label>
            <label class="toolbar-field">
              Buscar:
              <input type="text" id="env-filter-search" placeholder="prod, dev, lab..." />
            </label>
            <button class="btn-primary" id="btn-env-new">+ Simular nuevo entorno</button>
          </div>
        </div>

        <div class="card">
          <table>
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Slug</th>
                <th>Proveedor</th>
                <th>Cluster</th>
                <th>Retención logs</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody id="env-table-body">
              <!-- Rellenado desde JS -->
            </tbody>
          </table>
        </div>

        <div class="card" id="env-detail-card">
          <h3>Detalle de entorno</h3>
          <p class="muted" id="env-detail-empty">Selecciona un entorno de la tabla para ver su configuración y lanzar un despliegue simulado.</p>
          <div class="env-detail-body hidden">
            <p><strong>Entorno:</strong> <span id="env-name"></span> (<code id="env-slug"></code>)</p>
            <p><strong>Proveedor:</strong> <span id="env-provider"></span> · <strong>Cluster:</strong> <span id="env-cluster"></span></p>
            <p><strong>Componentes:</strong> <span id="env-components"></span></p>
            <p><strong>Retención:</strong> <span id="env-retention"></span></p>
            <div class="detail-actions">
              <button class="btn-primary" id="btn-simulate-deploy">Simular despliegue</button>
            </div>
            <h4>Despliegues recientes</h4>
            <ul id="env-deployments"></ul>
          </div>
        </div>
      </section>

      <!-- Cuentas cloud -->
      <section id="view-cloud-accounts" class="view">
        <div class="card card-header">
          <div>
            <h2>Cuentas cloud</h2>
            <p>Representación de cómo se gestionan las cuentas cloud en el panel real.</p>
          </div>
          <div class="toolbar">
            <span class="muted small">Demo: los datos son de ejemplo, pero puedes filtrar por proveedor.</span>
          </div>
        </div>

        <div class="card">
          <div class="toolbar">
            <label class="toolbar-field">
              Proveedor:
              <select id="accounts-filter-provider">
                <option value="all">Todos</option>
                <option value="AWS">AWS</option>
                <option value="Azure">Azure</option>
                <option value="GCP">GCP</option>
              </select>
            </label>
          </div>
          <table>
            <thead>
              <tr>
                <th>Nombre</th><th>Proveedor</th><th>Account/ID</th><th>Región por defecto</th>
              </tr>
            </thead>
            <tbody id="accounts-table-body"></tbody>
          </table>
        </div>
      </section>

      <!-- Despliegues -->
      <section id="view-deployments" class="view">
        <div class="card card-header">
          <div>
            <h2>Histórico de despliegues</h2>
            <p>Lista simulada de ejecuciones, sincronizada con los despliegues que lances en la demo.</p>
          </div>
          <div class="toolbar">
            <button class="btn-secondary" id="btn-reset-demo">Reset demo</button>
          </div>
        </div>

        <div class="card">
          <table>
            <thead>
              <tr>
                <th>Entorno</th><th>Estado</th><th>Inicio</th><th>Fin</th><th>Log (resumen)</th>
              </tr>
            </thead>
            <tbody id="deployments-table-body"></tbody>
          </table>
        </div>
      </section>

      <!-- Ajustes demo -->
      <section id="view-settings" class="view">
        <div class="card">
          <h2>Ajustes de la demo</h2>
          <p>Estos cambios solo afectan a la demo en /docs, no a la aplicación real.</p>
          <div class="settings-grid">
            <div>
              <h3>Modo visual</h3>
              <label class="switch">
                <input type="checkbox" id="toggle-high-contrast">
                <span class="slider"></span>
              </label>
              <span class="switch-label">Modo alto contraste</span>
              <p class="muted small">Ajusta colores para entornos con mucha luz o proyectores.</p>
            </div>
            <div>
              <h3>Datos ficticios</h3>
              <button class="btn-secondary" id="btn-demo-randomize">Randomizar estados</button>
              <p class="muted small">Cambia los estados de los entornos para simular incidencias.</p>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Modal: crear entorno simulado -->
  <div id="env-modal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <h3>Simular nuevo entorno</h3>
      <p class="muted small">Esto solo afecta a la demo, ideal para enseñar cómo se ampliaría la plataforma.</p>
      <form id="env-modal-form">
        <div class="form-row">
          <label>Nombre del entorno</label>
          <input type="text" id="modal-env-name" required placeholder="Ej. QA AWS" />
        </div>
        <div class="form-row">
          <label>Slug</label>
          <input type="text" id="modal-env-slug" required placeholder="qa-aws" />
        </div>
        <div class="form-row">
          <label>Proveedor</label>
          <select id="modal-env-provider" required>
            <option value="AWS">AWS</option>
            <option value="Azure">Azure</option>
            <option value="GCP">GCP</option>
            <option value="Local">Local / On‑prem</option>
          </select>
        </div>
        <div class="form-row">
          <label>Tipo de cluster</label>
          <select id="modal-env-cluster">
            <option value="EKS">EKS gestionado</option>
            <option value="AKS">AKS gestionado</option>
            <option value="GKE">GKE gestionado</option>
            <option value="kind">kind (lab)</option>
          </select>
        </div>
        <div class="form-row">
          <label>Retención de logs (días)</label>
          <input type="number" id="modal-env-retention" min="1" max="365" value="7" />
        </div>
        <div class="modal-actions">
          <button type="button" class="btn-secondary" id="env-modal-cancel">Cancelar</button>
          <button type="submit" class="btn-primary">Crear en demo</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Toast para feedback -->
  <div id="toast-container"></div>
</body>
</html>
